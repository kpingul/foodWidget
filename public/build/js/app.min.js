!function(){"use strict";angular.module("myApp",["ui.router"])}(),function(){"use strict";angular.module("myApp").config(["$urlRouterProvider","$stateProvider",function(e,t){e.when("","/"),t.state("home",{url:"/",templateUrl:"src/js/app/MainFeed/MainFeed.tpl.html",controller:"MainCtrl",controllerAs:"vm",resolve:{HighestRated:["dataService",function(e){function t(e){return e}return e.getHighestRated().then(function(e){return e})["catch"](t)}],MainFeed:["dataService",function(e){function t(e){return e}function n(e){return e}return e.getFeed().then(t)["catch"](n)}],RecentFeed:["dataService",function(e){function t(e){return e}function n(e){return e}return e.getRecentFeed().then(t)["catch"](n)}],MostLiked:["dataService",function(e){function t(e){return e}function n(e){return e}return e.getPopularLiker().then(t)["catch"](n)}]}})}])}(),function(){"use strict";function e(e,t,n,a,r,o,i){function u(e,t,n){r.getHighestRated(e,t,n).then(c)["catch"](s)}function c(e){l.highestRatedRestaurant=e}function s(e){console.log(e)}var l=this;l.images=t,l.feed=n,l.highestRated=a,console.log(l.highestRated),l.highestRatedRestaurant={},l.mostLiked=i,o.getTotalMeals(),u(l.highestRated.location.latitude,l.highestRated.location.longitude,l.highestRated.location.name)}angular.module("myApp").controller("MainCtrl",e),e.$inject=["$scope","RecentFeed","MainFeed","HighestRated","YelpService","dataService","MostLiked"]}(),function(){"use strict";angular.module("myApp").directive("scroll",["$window",function(e){return{restrict:"A",link:function(t,n,a){{var r=$(".navbar");$(".dropdown-menu")}$(e).width()>768?$(e).scroll(function(){$(e).scrollTop()<=25?r.removeClass("navbar-scroll"):r.addClass("navbar-scroll")}):r.addClass("navbar-scroll")}}}])}(),function(){"use strict";angular.module("myApp").filter("captionfilter",function(){return function(e){if(void 0!==e){var t=e.split(" ").filter(function(e,t){return"#"!==e[0]});return t.join(" ")}}})}(),function(){"use strict";angular.module("myApp").factory("dataService",["$http",function(e){function t(){return e.jsonp(d).then(i)["catch"](s)}function n(){return e.jsonp(d).then(u)["catch"](s)}function a(){return e.jsonp(d).then(c)["catch"](s)}function r(){e.jsonp(d).then(function(e){var t=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],n=[],a={},r=[],o=[];e.data.data.map(function(e,a){if(e.created_time){{var r=new Date(parseInt(1e3*e.created_time)),o=r.getMonth()+1;r.getDate(),r.getFullYear()}n.push(t[o-1])}}),n.map(function(e,t){a[e]||(a[e]=[]),a[e].push(!0)});for(var i in a)r.push(i),o.push(a[i].length);{var u={labels:r.reverse(),datasets:[{label:"My First dataset",fillColor:"rgba(52,73,91,.9)",strokeColor:"rgba(52,73,91,.3)",highlightFill:"rgba(52,73,91,.3)",highlightStroke:"rgba(52,73,91,.3)",data:o.reverse()}]},c=document.getElementById("myChart").getContext("2d");new Chart(c).Bar(u,{responsive:!0})}})}function o(){return e.jsonp(d).then(function(e){var t={},n={username:e.data.data[0].likes.data[0].username,img:e.data.data[0].likes.data[0].profile_picture,liked:[],images:[]};e.data.data.map(function(e,n){e.likes.data.forEach(function(e,n){t[e.username]||(t[e.username]={username:e.username?e.username:"",img:e.profile_picture,liked:[],images:[]}),t[e.username].liked.push(!0)})});for(var a in t)n.liked.length<t[a].liked.length&&(n=t[a]);return e.data.data.map(function(e,t){e.likes.data.forEach(function(t,a){n.username===t.username&&n.images.push(e.images.low_resolution.url)})}),n})}function i(e){var t=_.max(e.data.data,function(e){return e.likes.count});return t}function u(e){var t=[];return e.data.data.map(function(e,n){t.push(e)}),t}function c(e){var t=[];return e.data.data.map(function(e,n){t.length>=3||t.push(e)}),t}function s(e){return e}var l={getFeed:n,getRecentFeed:a,getHighestRated:t,getTotalMeals:r,getPopularLiker:o},d="https://api.instagram.com/v1/users/2078950030/media/recent?access_token=2078950030.1f5c74e.fa614065af4e484d92b96e91332850b0&callback=JSON_CALLBACK&count=50";return l}])}(),function(){"use strict";angular.module("myApp").filter("timefilter",function(){return function(e){var t=["January","Febuary","March","April","May","June","July","August","September","October","November","December]"],n=new Date(parseInt(1e3*e)),a=n.getMonth()+1,r=n.getDate(),o=n.getFullYear();return t[a-1]+" "+r+" "+o}})}(),function(){"use strict";angular.module("myApp").factory("mapService",function(){function e(e,t,n,a){this.lat=e,this.lng=t,this.url=decodeURI(n),this.location=a}function t(){var e=new google.maps.LatLng(this.lat,this.lng),t={center:e,zoom:14},a=new google.maps.Map(document.getElementById("map-canvas"),t),r={url:this.url,scaledSize:new google.maps.Size(60,60),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},o=new google.maps.Marker({position:e,map:a,animation:google.maps.Animation.DROP,icon:r}),i=new google.maps.InfoWindow({content:this.location});i.open(a,o),google.maps.event.addListener(o,"click",n)}function n(){marker.setAnimation(null!=marker.getAnimation()?null:google.maps.Animation.BOUNCE)}var a={setMap:e,getMap:t};return a})}(),function(){"use strict";angular.module("myApp").factory("YelpService",["$http",function(e){function t(t,r,u){return i.name=u,e.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+r+"&key=AIzaSyDlRrrjWcF9m_xqqDyPeVbEf8f2tFuUDjk").then(n).then(a)["catch"](o)}function n(e){var t="";return e.data.results.map(function(e,n){e.address_components&&e.address_components.map(function(e,n){e.types.length&&e.types.forEach(function(n,a){return"locality"==n.toLowerCase()?void(t=e.long_name):void 0})})}),t}function a(t){return e.get("api/yelp/business/"+i.name.split(" ").join("-")+"-"+t.split(" ").join("-")).then(r)["catch"](o)}function r(e){return e.data}function o(e){return e}var i={getHighestRated:t};return i.name="",i}])}();